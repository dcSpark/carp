"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9671],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>h});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),c=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(r),h=n,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||o;return r?a.createElement(m,i(i({ref:t},p),{},{components:r})):a.createElement(m,i({ref:t},p))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var c=2;c<o;c++)i[c]=r[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},9881:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=r(7462),n=(r(7294),r(3905));const o={sidebar_position:1},i="Carp (Cardano Postgres Indexer)",s={unversionedId:"intro",id:"intro",title:"Carp (Cardano Postgres Indexer)",description:"Syncs data from Cardano blockchain and stores it into a Postgres database",source:"@site/docs/intro.md",sourceDirName:".",slug:"/intro",permalink:"/carp/docs/intro",draft:!1,editUrl:"https://github.com/dcSpark/carp/docs/intro.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"Pitfalls, Risks & Limitations",permalink:"/carp/docs/pitfalls"}},l={},c=[],p={toc:c};function u(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,a.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"carp-cardano-postgres-indexer"},"Carp (Cardano Postgres Indexer)"),(0,n.kt)("p",null,"Syncs data from Cardano blockchain and stores it into a Postgres database"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Backend: written in Rust using ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/txpipe/oura"},"Oura")," and ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/dcSpark/cardano-multiplatform-lib"},"CML"),"."),(0,n.kt)("li",{parentName:"ul"},"Server & Client: Written using Typescript")),(0,n.kt)("p",null,"The source code can be found here on github: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/dcSpark/carp"},"dcSpark/carp"),"."),(0,n.kt)("h1",{id:"core-pillars"},"Core pillars"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Speed"),": queries should be fast so they can be used inside production applications like wallets without the user feeling the application is not responsive."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Modular"),": it should be easy to enable only the database functionality you need to keep sync times fast and size requirements low."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Flexible"),": instead of assuming the format users will need, prefer to use raw cbor or raw bytes. Almost all applications already implement ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/dcSpark/cardano-multiplatform-lib"},"CML")," so they should be able to parse this data without any issue."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Type safe"),": using and exposing types to avoid bugs is crucial in financial software. Database queries and the web server should have all its types checked and available to users."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Documented"),": Although we have to assume the user has read the ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger"},"cardano ledger specs"),", design decisions, usage and pitfalls should all be documented.")),(0,n.kt)("h1",{id:"architecture"},"Architecture"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:r(6254).Z,width:"939",height:"495"})),(0,n.kt)("h1",{id:"faq"},"FAQ"),(0,n.kt)("p",null,"Q) How does it take to sync the database from scratch?",(0,n.kt)("br",null),"\nA) Around 4-5 days. The first epochs are really fast, but Alonzo takes about ~1hr per epoch. We recommend taking occasional snapshots of the database so that you can easily spin up new nodes or recover from crashes without having to resync from scratch."),(0,n.kt)("p",null,"Q) How long to query history?",(0,n.kt)("br",null),"\nA) Querying the transaction history for an address should take <10ms for local queries (no network overhead). Of course, it will take longer if you're using a slow machine or if your machine is at max utilization."),(0,n.kt)("p",null,"Q) How to launch my own network?",(0,n.kt)("br",null),"\nA) TBD. We support parsing genesis blocks so it should be doable. Feel free to make a PR for more concrete steps."),(0,n.kt)("p",null,"Q) What are the risks and common pitfalls of using this project?",(0,n.kt)("br",null),"\nA) See ",(0,n.kt)("a",{parentName:"p",href:"./pitfalls"},"pitfalls")),(0,n.kt)("h1",{id:"running"},"Running"),(0,n.kt)("p",null,"This project contains two different parts to it:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"An ",(0,n.kt)("a",{parentName:"li",href:"/carp/docs/indexer/intro"},"indexer README")," which stores the chain to a Postgres database"),(0,n.kt)("li",{parentName:"ol"},"A ",(0,n.kt)("a",{parentName:"li",href:"/carp/docs/webserver/intro"},"webserver README")," which provides a REST API for querying the database (ex: for light wallets)")))}u.isMDXComponent=!0},6254:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/diagram-3f781631f5b75a3a34cbc36d0520e745.svg"}}]);